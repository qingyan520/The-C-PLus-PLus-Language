云服务器初始化

1. 创建新用户

```bash
adduser 用户名
adduser sjw
```

2.更改用户密码

```bash
passwd 用户名
passwd sjw
```

3.将用户添加到信任列表

```
usermod -aG wheel 用户名
usermod -aG wheel sjw
```

4.切换用户

```
su - 用户名
```

5.安装最新版g++

```
1.获取gcc版本号
rpm -q gcc

2.卸载旧版本
rpm -e [第二步查到的版本号]


3.上一步可能会遇到如下错误，卸载失败
error: Failed dependencies:
    gcc = 4.4.7-23.el6 is needed by (installed) gcc-c++-4.4.7-23.el6.x86_64
    gcc = 4.4.4 is needed by (installed) libtool-2.2.6-15.5.el6.x86_64
提示要卸载的版本有两个依赖，要先卸载掉这两个依赖（注意：下面要卸载的版本号要和上面提示的两个依赖的版本号一致）
	rpm -e gcc-c++-4.4.7-23.el6.x86_64
	rpm -e libtool-2.2.6-15.5.el6.x86_64
	

4.验证卸载成功
[root@123 /]# gcc -v
-bash: /usr/bin/gcc: No such file or directory
[root@123 /]# g++ -v
-bash: /usr/bin/g++: No such file or directory



安装最新版gcc,g++
1、在系统中安装存储库
yum install centos-release-scl

2、安装gcc和g++包（注意版本号：11版）
yum install -y devtoolset-11-gcc devtoolset-11-gcc-c++

3、配置安装好的包（注意版本号：11版）
scl enable devtoolset-11 bash

4、验证安装
[root@123 /]# gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/opt/rh/devtoolset-11/root/usr/libexec/gcc/x86_64-redhat-linux/11/lto-wrapper
Target: x86_64-redhat-linux
Configured with: ../configure --enable-bootstrap --enable-languages=c,c++,fortran,lto --prefix=/opt/rh/devtoolset-11/root/usr --mandir=/opt/rh/devtoolset-11/root/usr/share/man --infodir=/opt/rh/devtoolset-11/root/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --with-default-libstdcxx-abi=gcc4-compatible --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-11.2.1-20210728/obj-x86_64-redhat-linux/isl-install --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux
Thread model: posix
Supported LTO compression algorithms: zlib
gcc version 11.2.1 20210728 (Red Hat 11.2.1-1) (GCC)
[root@123 /]# g++ -v
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/opt/rh/devtoolset-11/root/usr/libexec/gcc/x86_64-redhat-linux/11/lto-wrapper
Target: x86_64-redhat-linux
Configured with: ../configure --enable-bootstrap --enable-languages=c,c++,fortran,lto --prefix=/opt/rh/devtoolset-11/root/usr --mandir=/opt/rh/devtoolset-11/root/usr/share/man --infodir=/opt/rh/devtoolset-11/root/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --with-default-libstdcxx-abi=gcc4-compatible --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-11.2.1-20210728/obj-x86_64-redhat-linux/isl-install --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux
Thread model: posix
Supported LTO compression algorithms: zlib
gcc version 11.2.1 20210728 (Red Hat 11.2.1-1) (GCC) 

5、配置环境变量
//因为不配置环境变量的话，每打开一个客户端，就需要执行一次上面的第三步配置安装包

//先查看gcc和g++安装位置
[root@123 /]# which gcc
/opt/rh/devtoolset-11/root/usr/bin/gcc
[root@123 /]# which g++
/opt/rh/devtoolset-11/root/usr/bin/g++

//编辑文件
vim /etc/profile
在文件后面添加下面两行内容：
PATH=$PATH::/opt/rh/devtoolset-11/root/usr/bin
export PATH

//重新加载文件
source /etc/profile
```

6.安装git

```
sudo yum  install git

```

7.git clone仓库

```
git clone
```

8.安装vimforcpp插件

```
curl -sLf https://gitee.com/HGtz2222/VimForCpp/raw/master/install.sh -o ./install.sh && bash ./install.sh


卸载方法：
bash ~/.VimForCpp/uninstall.sh
```

9.安装mysql客户端

```
1、设置mysql源
###在CentOS 7 / RHEL 7系统上### 
rpm -Uvh https://repo.mysql.com/mysql80-community-release-el7-3.noarch.rpm


2、安装MySQL Community Server
MySQL yum存储库包含用于多个MySQL版本的多个存储库配置。 因此，首先禁用mysql repo文件中的所有存储库
sed -i 's/enabled=1/enabled=0/' /etc/yum.repos.d/mysql-community.repo

启用centos mysql8版本
## CentOS & RedHat 版本
yum --enablerepo=mysql80-community install mysql-community-server

如果上面命令报错如下：
The GPG keys listed for the “MySQL 8.0 Community Server” repository are already installed but they are not correct for this package.
这是由于MySQL GPG 密钥已过期导致的 问题解决出处[https://bugs.mysql.com/bug.php?id=106188]
需要运行命令, 以2022年为例
输入以下命令解决：
rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022


3、启动MySQL服务
service mysqld start
使用Systemd
systemctl start mysqld.service

4、查找MySQL root密码
安装MySQL 8.0后，将为MySQL根用户创建一个临时密码。 您可以在日志文件中找到生成的临时密码。密码文件位置：/var/log/mysqld.log
grep "A temporary password" /var/log/mysqld.log

5、重置root密码
首次安装MySQL后，执行mysql_secure_installation命令以保护MySQL服务器，包含重置密码步骤
mysql_secure_installation
ps:建议设置一个密码等级高一点的密码6kaBD=cwyX#m
Enter password for user root:

The existing password for the user account root has expired. Please set a new password.

New password:
Re-enter new password:

Remove anonymous users? (Press y|Y for Yes, any other key for No) : y

Disallow root login remotely? (Press y|Y for Yes, any other key for No) : y

Remove test database and access to it? (Press y|Y for Yes, any other key for No) : y

Reload privilege tables now? (Press y|Y for Yes, any other key for No) : y


6、mysql 服务加入开机启动项，并启动mysql进程

### Using Systemd
systemctl enable mysqld.service
systemctl restart mysqld.service


7、开放3306端口

如果服务器开启了防火墙，记得开启3306端口

systemctl enable iptables
systemctl start iptables
vim /etc/sysconfig/iptables
##规则中加入
-A INPUT -p tcp -m state --state NEW -m tcp --dport 3306 -j ACCEPT
##重启防火墙
systemctl enable iptables.service
systemctl start iptables.service


登录mysql
mysql -u username -p

启动mysql
systemctl start mysqld.service

结束mysql
systemctl stop mysqld.service

重启mysql
systemctl restart mysqld.service

开机自启
systemctl enable mysqld.service
```

8.进入mysql之后修改密码等级

```
mysql -uroot -p
查看当前密码策略等级
SHOW VARIABLES LIKE 'validate_password%';

降低安全策略等级
set global validate_password.policy=LOW; 

降低密码长度需求
 set global validate_password.length=4;
 
 设置英文字母（包含大小写）最小长度
set global validate_password.mixed_case_count=0;

设置特殊字符最小长度
set global validate_password.special_char_count=0;

刷新权限（此处不需要）
FLUSH PRIVILEGES;

设置新密码
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '0403';
```

ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456';



在服务器重装后想要远程连接服务器，报错如下：

```vbnet
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the RSA key sent by the remote host is
SHA256:＊＊＊＊＊＊＊
Please contact your system administrator.
Add correct host key in /Users/apple/.ssh/known_hosts to get rid of this message.
Offending RSA key in /Users/apple/.ssh/known_hosts:17
RSA host key for [***ip address***] has changed and you have requested strict checking.
Host key verification failed.
```

解决方法如下：

```
ssh-keygen -R [服务器ip address]
```



 ALTER USER 'chat'@'localhost' IDENTIFIED BY 'password' PASSWORD EXPIRE NEVER;

 ALTER USER 'chat'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';

 FLUSH PRIVILEGES;

alter user 'chat'@'localhost' identified by '111111';







8lMk*szz#fob

8lMk*szz#fob

SET PASSWORD = PASSWORD('Ssxpb524');

ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY ‘Ssxpb524’;
